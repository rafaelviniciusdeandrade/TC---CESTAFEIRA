@using CestaFeira.Web.Models.Usuario
@model UsuarioModel

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Registrar Usuário</title>
    <link href="css/styles.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>
<body style="background-color: #4CAF50;">
    <div class="container d-flex align-items-center justify-content-center min-vh-100">
        <div class="col-lg-8">
            <div class="card shadow-lg border-0 rounded-lg">
                <div class="card-header text-center">
                    <h3 class="font-weight-light my-4">Criar uma Conta</h3>
                </div>
                <div class="card-body p-4">
                    <form method="post" asp-action="CadastrarUsuario" novalidate>
                        @if (TempData["ErrorMessage"] != null)
                        {
                            <div class="alert alert-danger">
                                @TempData["ErrorMessage"]
                            </div>
                        }
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Nome" placeholder="Nome completo" required />
                                    <label asp-for="Nome">Nome Completo</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="cpf" placeholder="CPF" required />
                                    <label asp-for="cpf">CPF</label>
                                </div>
                            </div>
                        </div>
                        <!-- E-mail e Celular -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Email" placeholder="Email" type="email" required />
                                    <label asp-for="Email">E-mail</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Cel" placeholder="Celular" required />
                                    <label asp-for="Cel">Celular</label>
                                </div>
                            </div>
                        </div>
                        <!-- Senha e Confirmar Senha -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Senha" placeholder="Senha" type="password" id="senha" required />
                                    <label asp-for="Senha">Senha</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input class="form-control" id="confirmSenha" type="password" placeholder="Confirmar Senha" required />
                                    <label for="confirmSenha">Confirmar Senha</label>
                                </div>
                            </div>
                        </div>
                        <!-- Endereço Completo -->
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Rua" placeholder="Rua" required />
                                    <label asp-for="Rua">Rua</label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Numero" placeholder="Número" required />
                                    <label asp-for="Numero">Número</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Bairro" placeholder="Bairro" required />
                                    <label asp-for="Bairro">Bairro</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Cidade" placeholder="Cidade" required />
                                    <label asp-for="Cidade">Cidade</label>
                                </div>
                            </div>
                        </div>
                        <!-- Estado e Data de Nascimento -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <select class="form-select" asp-for="Uf" aria-label="Estado (UF)" required>
                                        <option value="" selected>Selecione o Estado</option>
                                        <option value="AC">AC - Acre</option>
                                        <option value="AL">AL - Alagoas</option>
                                        <option value="AP">AP - Amapá</option>
                                        <option value="AM">AM - Amazonas</option>
                                        <option value="BA">BA - Bahia</option>
                                        <option value="CE">CE - Ceará</option>
                                        <option value="DF">DF - Distrito Federal</option>
                                        <option value="ES">ES - Espírito Santo</option>
                                        <option value="GO">GO - Goiás</option>
                                        <option value="MA">MA - Maranhão</option>
                                        <option value="MT">MT - Mato Grosso</option>
                                        <option value="MS">MS - Mato Grosso do Sul</option>
                                        <option value="MG">MG - Minas Gerais</option>
                                        <option value="PA">PA - Pará</option>
                                        <option value="PB">PB - Paraíba</option>
                                        <option value="PR">PR - Paraná</option>
                                        <option value="PE">PE - Pernambuco</option>
                                        <option value="PI">PI - Piauí</option>
                                        <option value="RJ">RJ - Rio de Janeiro</option>
                                        <option value="RN">RN - Rio Grande do Norte</option>
                                        <option value="RS">RS - Rio Grande do Sul</option>
                                        <option value="RO">RO - Rondônia</option>
                                        <option value="RR">RR - Roraima</option>
                                        <option value="SC">SC - Santa Catarina</option>
                                        <option value="SP">SP - São Paulo</option>
                                        <option value="SE">SE - Sergipe</option>
                                        <option value="TO">TO - Tocantins</option>
                                    </select>
                                    <label asp-for="Uf">Estado (UF)</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="Data" placeholder="Data de Nascimento" type="date" required />
                                    <label asp-for="Data">Data de Nascimento</label>
                                </div>
                            </div>
                        </div>
                        <!-- Perfil -->

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <select class="form-select" asp-for="Perfil" id="perfilSelect" required onchange="toggleNomeFantasia()">
                                        <option value="COMUM">Consumidor</option>
                                        <option value="PROD">Produtor</option>
                                    </select>
                                    <label asp-for="Perfil">Perfil</label>
                                </div>
                            </div>
                        </div>

                        <!-- Campo Nome Fantasia (inicialmente oculto) -->
                        <div class="row mb-3" id="nomeFantasiaDiv" style="display: none;">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input class="form-control" asp-for="NomeFantasia" placeholder="Nome Fantasia" required />
                                    <label asp-for="NomeFantasia">Nome Fantasia</label>
                                </div>
                            </div>
                        </div>


                        <!-- Botão de Registro -->
                        <div class="mt-4 mb-0">
                            <div class="d-grid">
                                <button type="submit" class="btn btn-success btn-block" onclick="return validarSenhas()">Criar Conta</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="card-footer text-center py-3">
                    <div class="small"><a asp-controller="Usuario" asp-action="Login">Já tem uma conta? Faça login</a></div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script>
        function validarSenhas() {
            const senha = document.getElementById("senha").value;
            const confirmSenha = document.getElementById("confirmSenha").value;

            if (senha !== confirmSenha) {
                alert("As senhas não correspondem.");
                return false;
            }
            return true;
        }

        function toggleNomeFantasia() {
            const perfilSelect = document.getElementById("perfilSelect");
            const nomeFantasiaDiv = document.getElementById("nomeFantasiaDiv");

            // Verifica se o perfil selecionado é "PROD" (Produtor)
            if (perfilSelect.value === "PROD") {
                nomeFantasiaDiv.style.display = "block";
            } else {
                nomeFantasiaDiv.style.display = "none";
            }
        }

        // Executa a função na carga inicial da página para ajustar o campo, caso o perfil já esteja selecionado
        document.addEventListener("DOMContentLoaded", toggleNomeFantasia);
    </script>


</body>
</html>
